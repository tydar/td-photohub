name: CI build
on: [pull_request, push]

jobs:
    ci:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - uses: actions/setup-python@v2
              with:
                  python-version: '3.x'
                  architecture: 'x64'
            - name: poetry action
              uses: abatilo/actions-poetry@v2.0.0
            - name: poetry update
              run: poetry update
            - name: poetry install
              run: poetry install
            - name: poetry run pytest
              run: poetry run pytest
